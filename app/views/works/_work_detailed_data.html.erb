<div class="detailed_data row">
  <div class="medium-6 columns">
  <% if can?(:read_location, work) %>
    <%= definition_list_for work, {render_as: :table} do %>
      <thead><tr>
        <th><strong>Locatie</strong></th>
        <td class="actions">
          <% if can?(:edit_location, work) and work.id %>
            <%= link_to 'Bewerk', collection_work_edit_location_path(work.collection, work), data: { open_in_context: true} %> |
            <%= link_to 'Historie', collection_work_location_history_path(work.collection, work), data: { open_in_context: true} %>
          <% end %>
        </td>
      </tr></thead>
      <tbody>
      <%= define_unless_blank :location %>
      <%= define_unless_blank :location_floor %>
      <%= define_unless_blank :location_detail %>
      </tbody>
    <% end %>
  <% end %>
  <%= definition_list_for work, {render_as: :table} do %>

    <%= define_unless_blank :alt_number_1, description: Work.human_attribute_name_overridden(:alt_number_1, @collection) %>
    <%= define_unless_blank :alt_number_2, description: Work.human_attribute_name_overridden(:alt_number_2, @collection) %>
    <%= define_unless_blank :alt_number_3, description: Work.human_attribute_name_overridden(:alt_number_3, @collection) %>
    <%= define_unless_blank :object_creation_year, description: 'Datering' %>
    <%= define_unless_blank :object_categories, {human_attributize_value: true} %>
    <%= define_unless_blank :techniques %>
    <% if @selection[:display] == :complete %>
      <%= define_unless_blank :medium, {classname: :complete_data} %>
      <%= define_unless_blank :medium_comments, {classname: :complete_data} %>
      <%= define_unless_blank :frame_type, {classname: :complete_data} %>
    <% end %>
    <%= define_unless_blank :signature_rendered %>
    <%= define_unless_blank :object_format_code, {modifier: :upcase} %>
    <%= define_unless_blank :work_size, {description: "Afm. beeld (cm)"} %>
    <%= define_unless_blank :frame_size, {description: "Afm. lijst (cm)"}  %>
    <% if @selection[:display] == :complete %>
      <%= define_unless_blank :abstract_or_figurative_rendered, {classname: :complete_data} %>
      <%= define_unless_blank :style, {classname: :complete_data} %>
      <%= define_unless_blank :subset, {classname: :complete_data} %>
      <%= define_unless_blank :collection_name_extended, {classname: :complete_data} %>
      <%= define_unless_blank :themes, {classname: :complete_data} %>
      <%= define_unless_blank :locality_geoname_name, {classname: :complete_data} %>
      <%= define_unless_blank :cluster, {classname: :complete_data} %>
    <% end%>
    <%= define_unless_blank :print_rendered  %>
  <% end %>
  </div>
  <div class="medium-6 columns">

  <%= definition_list_for work, {render_as: :table} do %>
    <%= define_unless_blank :cached_tag_list %>
    <%= define_unless_blank :condition_work_rendered %>
    <%= define_unless_blank :condition_frame_rendered %>
    <% if @selection[:display] == :complete %>
      <%= define_unless_blank :placeability, {classname: :complete_data}  %>
      <%= define_unless_blank :grade_within_collection, {classname: :complete_data} %>
      <%= define_unless_blank :main_collection, {classname: :complete_data} %>
    <% end %>
    <%= define_unless_blank :information_back, description: "Info. achterz." if can?(:read_information_back, work) %>
    <%= define_unless_blank :other_comments, description: "Overige opm." %>
    <%= define_unless_blank :internal_comments, {description: "Int. opm.", classname: :complete_data} if can?(:read_internal_comments, work) %>
    <% if @selection[:display] == :complete %>
    <%= define_unless_blank :sources, {classname: :complete_data} %>
    <%= define_unless_blank :source_comments, {classname: :complete_data} %>
    <%= define_unless_blank :owner, {classname: :complete_data} %>
    <% end %>
  <% end %>
  <%= definition_list_for work, {render_as: :table} do %>
    <% if can?(:read_valuation, work.collection) %>
      <%= define_unless_blank :purchased_on_with_fallback %>
      <% if work.purchase_price %>
      <tr><th><%=Work.human_attribute_name(:purchase_price)%></th><td><%=number_to_currency work.purchase_price, unit: work.purchase_price_symbol %></td></tr>
      <% end %>
      <%= define_unless_blank :market_value, modifier: :number_to_currency, description: "Marktwaarde" %>
      <%= define_unless_blank :replacement_value, modifier: :number_to_currency, description: "Vervangingswaarde" %>
      <%= define_unless_blank :market_value_range, modifier: :number_to_currency, description: "Marktwaarde" %>
      <%= define_unless_blank :replacement_value_range, modifier: :number_to_currency, description: "Vervangingswaarde" %>
      <%= define_unless_blank :minimum_bid, modifier: :number_to_currency %>
      <%= define_unless_blank :selling_price, modifier: :number_to_currency %>
      <%= define_unless_blank :valuation_on %>
      <%= define_unless_blank :selling_price_minimum_bid_comments %>
      <% if can?(:read_valuation_reference, work.collection) %>
        <%= define_unless_blank :price_reference, {classname: :complete_data} if @selection[:display] == :complete %>
      <% end %>
    <% end %>
  <% end %>
  <%= definition_list_for work, {render_as: :table} do %>

    <%
    artist_involvements_texts = []

    if @selection_filter and @selection_filter["geoname_ids"] and @selection_filter["geoname_ids"].length > 0
      artist_involvements_texts = work.artist_involvements_texts @selection_filter["geoname_ids"]
    else
      artist_involvements_texts = work.cached_collection_locality_artist_involvements_texts
    end
    if artist_involvements_texts && artist_involvements_texts.length > 0 %>
    <tr><th>Gerelateerde<br/>betrekkingen:</th><td><ul><% artist_involvements_texts.each do |a| %><li><%=a%></li><% end %></ul></td></tr>
    <% end %>
    <% if @selection[:display] == :complete %>
      <% if work.attachments.to_a.delete_if{|a| a.id.nil?}.count > 0 %>
        <tr><th>Bijlagen:</th><td><ul>
          <% work.attachments.for_role(current_user.role).each do |attachment| %>
            <li><%= link_to attachment.file_name.truncate(30, omission: "â€¦#{attachment.file_name.last(15)}"), attachment.file.url, title: attachment.file_name, target: '_blank' %> <small>(<%= number_to_human_size(attachment.file.size)%>)</small></li>
          <% end %>
        </ul></td></tr>
      <% end %>
      <%= define_unless_blank :image_rights, {classname: :complete_data} %>
      <%= define_unless_blank :publish, {classname: :complete_data} %>
      <%= define_unless_blank :created_at, {classname: :complete_data} %>
      <%= define_unless_blank :inventoried_at, {classname: :complete_data} %>
      <%= define_unless_blank :refound_at, {classname: :complete_data} %>
      <%= define_unless_blank :new_found_at, {classname: :complete_data} %>
    <% end %>
  <% end %>
  </div>
</div>
